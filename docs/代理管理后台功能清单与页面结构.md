# 轻量级代理管理后台功能清单与页面结构

## 1. 页面结构表

| 一级页面 | 二级页面 | 页面路径 | 功能描述 | 权限要求 | 接口状态 |
|---------|---------|----------|----------|----------|----------|
| **登录页面** | - | `/login` | 管理员登录认证 | 公开访问 | ✅ 已实现 |
| **系统监控** | 实时监控 | `/dashboard/monitor` | 系统实时状态监控 | ADMIN | ⏳ 待实现 |
| | 性能指标 | `/dashboard/metrics` | 性能指标统计分析 | ADMIN | ⏳ 待实现 |
| | 告警中心 | `/dashboard/alerts` | 系统告警管理 | ADMIN | ⏳ 待实现 |
| **访问概览** | 流量统计 | `/overview/traffic` | 流量统计与趋势分析 | ADMIN | ⏳ 待实现 |
| | 用户访问 | `/overview/users` | 用户访问TopN统计 | ADMIN | ⏳ 待实现 |
| | 应用访问 | `/overview/apps` | 应用访问TopN统计 | ADMIN | ⏳ 待实现 |
| | 地理分布 | `/overview/geo` | 访问地理位置分布 | ADMIN | ⏳ 待实现 |
| **代理配置** | 入站配置 | `/config/inbounds` | 代理入站端口配置 | ADMIN | ✅ 已实现 |
| | 出站配置 | `/config/outbounds` | 代理出站规则配置 | ADMIN | ⏳ 待实现 |
| | 路由规则 | `/config/routes` | 智能路由规则管理 | ADMIN | ✅ 已实现 |
| | 用户管理 | `/config/users` | 代理用户账号管理 | ADMIN | ✅ 已实现 |
| | 限流配置 | `/config/rate-limits` | 流量限制策略配置 | ADMIN | ✅ 已实现 |
| **工具页面** | 连接测试 | `/tools/connection-test` | 代理连接测试工具 | ADMIN | ⏳ 待实现 |
| | 日志查看 | `/tools/logs` | 系统日志查看与搜索 | ADMIN | ⏳ 待实现 |
| | 配置导入导出 | `/tools/config-backup` | 配置备份与恢复 | SUPER_ADMIN | ⏳ 待实现 |
| | 系统设置 | `/tools/settings` | 系统基础设置 | SUPER_ADMIN | ⏳ 待实现 |
| **个人中心** | 个人信息 | `/profile/info` | 个人信息查看 | ADMIN | ✅ 已实现 |
| | 修改密码 | `/profile/change-password` | 修改登录密码 | ADMIN | ✅ 已实现 |
| | 操作日志 | `/profile/audit-logs` | 个人操作审计日志 | ADMIN | ⏳ 待实现 |

## 2. 功能列表

### 2.1 登录页面
- **用户认证**
  - 用户名密码登录
  - JWT Token生成与验证
  - 登录失败次数限制
  - 首次登录强制修改密码
  - 记住登录状态（可选）

### 2.2 系统监控
- **实时监控**
  - 系统资源使用率（CPU、内存、磁盘）
  - 代理进程状态监控
  - 活跃连接数实时统计
  - 网络吞吐量实时监控
  - 错误率实时告警

- **性能指标**
  - 历史性能趋势图表
  - 响应时间分位数统计
  - 并发连接数峰值统计
  - 协议分布统计（HTTP/SOCKS5/SS）
  - 成功率与失败率统计

- **告警中心**
  - 告警规则配置
  - 告警历史记录
  - 告警通知设置
  - 告警级别管理

### 2.3 访问概览
- **流量统计**
  - 总流量趋势图（上行/下行）
  - 按时间维度流量统计（小时/天/月）
  - 协议流量分布饼图
  - 峰值流量时段分析

- **用户访问**
  - 用户访问量TopN排行
  - 用户流量消耗TopN排行
  - 用户活跃度统计
  - 用户地理位置分布

- **应用访问**
  - 目标域名访问TopN排行
  - 应用类型流量分布
  - 热门服务访问统计
  - 访问失败率统计

- **地理分布**
  - 访问来源地理位置地图
  - 国家/地区访问统计
  - IP归属地分析
  - 异常地理位置告警

### 2.4 代理配置
- **入站配置**
  - 协议类型配置（SOCKS5/HTTPS_CONNECT/SS）
  - 监听端口与IP配置
  - TLS证书配置
  - 协议嗅探开关
  - 用户绑定管理

- **出站配置**
  - 出站代理配置
  - 直连出站配置
  - 负载均衡策略
  - 健康检查配置
  - 故障转移设置

- **路由规则**
  - 域名规则配置
  - IP/CIDR规则配置
  - 端口规则配置
  - 网络类型规则配置
  - 规则优先级管理

- **用户管理**
  - 代理用户CRUD操作
  - 用户凭据管理
  - 用户状态控制
  - 用户权限分配
  - 批量用户操作

- **限流配置**
  - 全局限流策略
  - 用户级限流策略
  - 上行/下行速率限制
  - 突发流量控制
  - 限流生效时间设置

### 2.5 工具页面
- **连接测试**
  - 代理连接可用性测试
  - 目标服务连通性测试
  - 延迟测试工具
  - 速度测试工具
  - 批量连接测试

- **日志查看**
  - 系统日志实时查看
  - 日志级别过滤
  - 日志关键词搜索
  - 日志时间范围筛选
  - 日志导出功能

- **配置导入导出**
  - 完整配置备份
  - 配置恢复功能
  - 配置版本管理
  - 配置差异对比
  - 配置模板管理

- **系统设置**
  - 系统基础参数配置
  - 日志级别设置
  - 会话超时设置
  - 安全策略配置
  - 系统维护模式

### 2.6 个人中心
- **个人信息**
  - 管理员信息查看
  - 角色权限显示
  - 最后登录时间
  - 登录IP记录

- **修改密码**
  - 当前密码验证
  - 新密码强度检查
  - 密码修改历史
  - 强制密码策略

- **操作日志**
  - 个人操作审计记录
  - 操作时间与IP记录
  - 操作结果状态
  - 敏感操作标记

## 3. 关键UI元素设计

### 3.1 登录页面
- **布局元素**
  - 居中登录卡片
  - 品牌Logo与标题
  - 用户名输入框（带图标）
  - 密码输入框（带显示/隐藏切换）
  - 登录按钮（带加载状态）
  - 记住登录复选框
  - 错误提示区域

- **视觉设计**
  - 简洁现代的卡片式设计
  - 渐变背景或几何图案
  - 响应式布局适配
  - 深色/浅色主题切换

### 3.2 系统监控页面
- **实时监控面板**
  - 系统状态指示灯（绿/黄/红）
  - 实时数据卡片（CPU、内存、连接数）
  - 实时流量图表（折线图）
  - 错误率仪表盘
  - 活跃用户数显示

- **性能指标图表**
  - 多维度时间序列图表
  - 可交互的图表缩放
  - 数据点悬停提示
  - 图表类型切换（线图/柱图/面积图）
  - 时间范围选择器

### 3.3 访问概览页面
- **统计卡片组**
  - 总流量统计卡片
  - 活跃用户数卡片
  - 成功率统计卡片
  - 平均响应时间卡片

- **可视化图表**
  - 流量趋势折线图
  - 协议分布饼图
  - 用户TopN排行榜
  - 地理位置热力图
  - 应用访问柱状图

### 3.4 代理配置页面
- **配置表格**
  - 可排序的数据表格
  - 行内编辑功能
  - 批量操作工具栏
  - 状态指示器（启用/禁用）
  - 操作按钮组（编辑/删除/复制）

- **配置表单**
  - 分步骤配置向导
  - 实时表单验证
  - 配置预览功能
  - 高级选项折叠面板
  - 配置模板选择

### 3.5 工具页面
- **测试工具界面**
  - 测试参数输入区域
  - 一键测试按钮
  - 实时测试结果显示
  - 测试历史记录
  - 结果导出功能

- **日志查看器**
  - 虚拟滚动日志列表
  - 日志级别颜色标识
  - 搜索与过滤工具栏
  - 日志详情弹窗
  - 自动刷新开关

## 4. 可视化组件建议

### 4.1 图表组件
- **时间序列图表**
  - 使用ECharts或Chart.js
  - 支持实时数据更新
  - 多系列数据展示
  - 缩放与平移交互

- **统计图表**
  - 饼图：协议分布、地区分布
  - 柱状图：TopN排行、对比分析
  - 仪表盘：成功率、资源使用率
  - 热力图：时间分布、地理分布

### 4.2 数据展示组件
- **实时数据卡片**
  - 数值动画效果
  - 趋势指示箭头
  - 同比环比显示
  - 阈值告警标识

- **数据表格**
  - 虚拟滚动支持大数据量
  - 列排序与筛选
  - 行选择与批量操作
  - 自定义列显示

### 4.3 交互组件
- **配置表单**
  - 动态表单生成
  - 条件显示/隐藏
  - 实时验证反馈
  - 配置预览模式

- **操作反馈**
  - Toast消息提示
  - 确认对话框
  - 进度指示器
  - 操作结果状态

### 4.4 布局组件
- **响应式布局**
  - 栅格系统布局
  - 侧边栏折叠
  - 移动端适配
  - 主题切换支持

- **导航组件**
  - 面包屑导航
  - 标签页导航
  - 侧边栏菜单
  - 快捷操作工具栏

## 5. 已实现接口详情

### 5.1 管理员认证接口 (AdminController)
- **POST /admin/login** - 管理员登录 ✅
- **POST /admin/change-password** - 修改密码 ✅
- **GET /admin/me** - 获取当前用户信息 ✅
- **POST /admin/logout** - 退出登录 ✅
- **POST /admin/create** - 创建管理员 (SUPER_ADMIN) ✅
- **POST /admin/disable** - 禁用管理员 (SUPER_ADMIN) ✅
- **POST /admin/delete** - 删除管理员 (SUPER_ADMIN) ✅

### 5.2 入站配置接口 (InboundConfigController)
- **GET /api/inbounds** - 分页查询入站配置列表 ✅
- **GET /api/inbounds/{id}** - 获取单个入站配置详情 ✅
- **POST /api/inbounds** - 创建入站配置 ✅
- **PUT /api/inbounds/{id}** - 更新入站配置 ✅
- **DELETE /api/inbounds/{id}** - 删除入站配置 ✅
- **GET /api/inbounds/protocol/{protocol}** - 按协议类型查询 ✅
- **GET /api/inbounds/status/{status}** - 按状态查询 ✅

### 5.3 用户管理接口 (UserController)
- **GET /api/users** - 分页查询用户列表 ✅
- **GET /api/users/{id}** - 获取单个用户详情 ✅
- **POST /api/users** - 创建用户 ✅
- **PUT /api/users/{id}** - 更新用户信息 ✅
- **DELETE /api/users/{id}** - 删除用户 ✅
- **PUT /api/users/{id}/credential** - 重置用户凭证 ✅
- **PUT /api/users/{id}/status** - 更新用户状态 ✅

### 5.4 路由规则接口 (RouteController)
- **GET /api/routes** - 分页查询路由列表 ✅
- **GET /api/routes/{id}** - 获取单个路由详情 ✅
- **POST /api/routes** - 创建路由规则 ✅
- **PUT /api/routes/{id}** - 更新路由规则 ✅
- **DELETE /api/routes/{id}** - 删除路由规则 ✅
- **GET /api/routes/enabled** - 获取启用的路由列表 ✅

### 5.5 限流配置接口 (RateLimitController)
- **GET /api/rate-limits** - 分页查询限流策略列表 ✅
- **GET /api/rate-limits/{id}** - 获取单个限流策略详情 ✅
- **POST /api/rate-limits** - 创建限流策略 ✅
- **PUT /api/rate-limits/{id}** - 更新限流策略 ✅
- **DELETE /api/rate-limits/{id}** - 删除限流策略 ✅
- **GET /api/rate-limits/scope/{scopeType}** - 按作用域类型查询 ✅
- **GET /api/rate-limits/enabled/{enabled}** - 按启用状态查询 ✅

### 5.6 聚合配置接口 (AggregateConfigController)
- **GET /api/config/aggregate** - 获取聚合配置 (支持HTTP 304缓存) ✅
- **GET /api/config/hash** - 获取当前配置哈希值 ✅

### 5.7 待实现接口
以下接口尚未实现，需要后续开发：

**系统监控相关接口** ⏳
- GET /api/monitor/system - 系统资源监控
- GET /api/monitor/connections - 连接状态监控
- GET /api/monitor/metrics - 性能指标统计
- GET /api/alerts - 告警信息查询

**访问概览相关接口** ⏳
- GET /api/statistics/traffic - 流量统计
- GET /api/statistics/users/top - 用户访问TopN
- GET /api/statistics/apps/top - 应用访问TopN
- GET /api/statistics/geo - 地理位置分布

**出站配置接口** ⏳
- GET /api/outbounds - 出站配置管理
- POST /api/outbounds - 创建出站配置
- PUT /api/outbounds/{id} - 更新出站配置
- DELETE /api/outbounds/{id} - 删除出站配置

**工具相关接口** ⏳
- POST /api/tools/connection-test - 连接测试
- GET /api/logs - 日志查询
- POST /api/config/export - 配置导出
- POST /api/config/import - 配置导入
- GET /api/settings - 系统设置
- PUT /api/settings - 更新系统设置

**审计日志接口** ⏳
- GET /api/audit-logs - 操作审计日志查询

## 6. 技术实现建议

### 6.1 前端技术栈
- **框架选择**：React/Vue.js + TypeScript
- **UI组件库**：Ant Design/Element Plus
- **图表库**：ECharts/Chart.js
- **状态管理**：Redux/Vuex/Pinia
- **路由管理**：React Router/Vue Router

### 6.2 后端接口
- **RESTful API**：遵循REST设计规范
- **认证授权**：JWT Token + RBAC权限控制
- **数据分页**：支持分页查询与无限滚动
- **实时通信**：WebSocket推送实时数据

### 6.3 数据可视化
- **实时更新**：WebSocket + 数据缓存
- **性能优化**：虚拟滚动 + 懒加载
- **交互体验**：防抖节流 + 加载状态
- **响应式设计**：移动端适配 + 触摸优化

---

*本文档基于NasProxy轻量级多协议智能代理项目需求设计，涵盖了管理后台的完整功能规划与UI设计建议。*